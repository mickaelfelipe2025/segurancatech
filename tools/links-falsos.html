<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Identificador de Links Falsos - Segurança Tech</title>
  <style>
    :root{--bg:#f4f6f8;--card:#fff;--nav:#122c66;--header:#0a1f44;--text:#0b1220;--muted:#475569;--shadow:0 10px 22px rgba(2,6,23,.10);--radius:14px}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
    header{background:var(--header);color:#fff;padding:22px 16px;text-align:center}
    nav{background:var(--nav);padding:10px 12px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap;align-items:center;position:sticky;top:0;z-index:999}
    nav a{color:#fff;text-decoration:none;font-weight:700;padding:10px 12px;border-radius:10px}
    nav a:hover{background:rgba(255,255,255,.10)}
    .container{max-width:980px;margin:0 auto;padding:22px 14px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    input{flex:1;min-width:240px;padding:12px 12px;border:1px solid #d7e1ef;border-radius:12px;font-size:16px}
    button{padding:12px 14px;border:0;border-radius:12px;background:#122c66;color:#fff;font-weight:800;cursor:pointer}
    button:hover{filter:brightness(1.05)}
    .badge{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:900}
    .ok{background:#e8fff1;color:#0f7a3a}
    .warn{background:#fff7e6;color:#8a5b00}
    .bad{background:#ffecec;color:#b42318}
    ul{margin:10px 0 0;padding-left:18px;color:var(--muted);line-height:1.6}
    .muted{color:var(--muted);line-height:1.6}
    .hr{height:1px;background:#e8eef6;margin:14px 0}
  </style>
</head>
<body>
<header>
  <h1>Identificador de Links Falsos</h1>
  <p>Heurísticas rápidas + checklist de segurança</p>
</header>

<nav>
  <a href="../index.html">Home</a>
  <a href="../sobre.html">Sobre</a>
  <a href="../index.html">Ferramentas</a>
</nav>

<div class="container">
  <div class="card">
    <h2>Verificar</h2>
    <div class="row">
      <input id="url" type="text" placeholder="Cole o link aqui (ex: https://exemplo.com)"/>
      <button id="btn">Analisar</button>
    </div>

    <div class="hr"></div>

    <div id="result" class="muted">Cole um link e clique em <strong>Analisar</strong>.</div>

    <div class="hr"></div>

    <h2>Por que isso é importante?</h2>
    <p class="muted">
      Links maliciosos são usados para phishing (páginas falsas), roubo de senhas e até instalação de malware.
      Essa ferramenta faz uma análise por <strong>regras simples</strong> (não é antivírus), mas já ajuda a identificar riscos comuns.
    </p>
  </div>
</div>

<script>
  const elUrl = document.getElementById("url");
  const elBtn = document.getElementById("btn");
  const elRes = document.getElementById("result");

  function scoreUrl(u){
    let score = 0;
    const reasons = [];

    const raw = (u || "").trim();

    if (!raw) {
      return {level:"warn", label:"Cole um link", score, reasons:["Nenhum link informado."]};
    }

    let url;
    try{
      url = new URL(raw.includes("://") ? raw : "https://" + raw);
    }catch{
      return {level:"bad", label:"Formato inválido", score:10, reasons:["O link não parece um URL válido."]};
    }

    const host = url.hostname.toLowerCase();
    const href = url.href;

    // Regras comuns
    if (!href.startsWith("https://")) { score += 2; reasons.push("Não usa HTTPS (cadeado)."); }
    if (host.includes("xn--")) { score += 3; reasons.push("Domínio com punycode (pode ser homógrafo)."); }
    if (host.split(".").length >= 4) { score += 2; reasons.push("Muitos subdomínios (pode ser tentativa de enganar)."); }
    if (/[0-9]/.test(host) && host.length > 18) { score += 1; reasons.push("Domínio longo com números (padrão comum em golpes)."); }
    if (host.match(/(login|secure|account|verify|support|update|billing)/)) { score += 2; reasons.push("Palavras que imitam login/verificação (comum em phishing)."); }
    if (href.match(/(@|%40)/)) { score += 2; reasons.push("Contém @ (pode redirecionar/mascarar destino)."); }
    if (href.length > 120) { score += 1; reasons.push("URL muito longa (pode ocultar o destino real)."); }
    if (url.searchParams.toString().length > 80) { score += 1; reasons.push("Muitos parâmetros na URL (pode ser rastreio/ocultação)."); }

    // Decisão
    let level = "ok";
    let label = "Baixo risco (pela heurística)";

    if (score >= 6) { level = "bad"; label = "Alto risco — suspeito"; }
    else if (score >= 3) { level = "warn"; label = "Atenção — verifique"; }

    return {level, label, score, reasons, parsed: {host, protocol:url.protocol, path:url.pathname}};
  }

  function render(res){
    const badgeClass = res.level === "ok" ? "ok" : (res.level === "warn" ? "warn" : "bad");
    const reasons = (res.reasons && res.reasons.length)
      ? `<ul>${res.reasons.map(r => `<li>${r}</li>`).join("")}</ul>`
      : `<ul><li>Nenhum sinal óbvio detectado pelas regras.</li></ul>`;

    const extra = res.parsed
      ? `<div class="muted" style="margin-top:10px">
           <strong>Domínio:</strong> ${res.parsed.host}<br/>
           <strong>Protocolo:</strong> ${res.parsed.protocol}<br/>
           <strong>Caminho:</strong> ${res.parsed.path}
         </div>`
      : "";

    elRes.innerHTML = `
      <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <span class="badge ${badgeClass}">${res.label}</span>
        <span class="muted">Pontuação: <strong>${res.score}</strong> (quanto maior, mais suspeito)</span>
      </div>
      ${reasons}
      ${extra}
      <div class="muted" style="margin-top:12px">
        <strong>Dica:</strong> se o link veio por WhatsApp/e-mail e pede senha/código, não clique — confirme a origem.
      </div>
    `;
  }

  elBtn.addEventListener("click", () => render(scoreUrl(elUrl.value)));
  elUrl.addEventListener("keydown", (e) => { if (e.key === "Enter") render(scoreUrl(elUrl.value)); });
</script>
</body>
</html>
